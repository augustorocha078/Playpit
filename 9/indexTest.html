<html>
<head>
	<meta charset="UTF-8">
	<title>first canvas</title>
	<script src="/common/js/Three.js" type="text/javascript" ></script>
	
	<script src="/common/js/Detector.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/utils/Stats.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/RequestAnimationFrame.js" type="text/javascript"></script>
	<script src="/common/js/utils/noise.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="/common/js/gui/gui.full.js" type="text/javascript" charset="utf-8"></script>
	
	
	<script src="/common/js/ShaderExtras.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/RenderPass.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/ShaderPass.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/TexturePass.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/EffectComposer.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/MaskPass.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/BloomPass.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/DotScreenPass.js" type="text/javascript" charset="utf-8"></script>
	<script src="/common/js/postprocessing_dev/FilmPass.js" type="text/javascript" charset="utf-8"></script>
	
	
	<style>
	 body{
		margin:0;
		padding:0;
		background-color:#ffffff;
		overflow: hidden;	
	}
	</style>
	<link rel="stylesheet" href="../common/js/gui/gui.css" type="text/css" media="screen" title="no title" charset="utf-8">
	
</head>

<body>
	<script type="text/javascript">

				var container, camera, scene, renderer;
				var target, cTarget;
				var particleGeometry,	particles, particleMaterials;

			    var composerScene;

				var lineGeometry, lineMaterial, line;
				var lineColors = new Array();
				var colors = [ 0xefb3bb, 0x96d7eb, 0xb4b4b4, 0x75a3b0, 0xa08189 ];

				var particlePositions = new Array();
				var oldPositions = new Array();
				var vVectors = new Array();

				var rotationSpeed = 0;

				var tVector = new THREE.Vector3(-10,0,0);
				var mrx = 0;
				var mry = 0;
				var speedMultiply = 1.00;

				var stageWidth = 500;
				var stageHeight = 500;
				var mx=0;
				var my=0;

				var pi = Math.PI;

				var areaLength = 1200;
				var particleR = 15;
				var particleNum = 1000;
				var strokeNum = 30;
				
				//for depth of field
				var rtTextureDepth, rtTextureColor, materialDepth

				function init(){

					if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

					stageWidth = window.innerWidth;
					stageHeight = window.innerHeight;

					//container
					container = document.createElement('div');
					document.body.appendChild(container);

					//scene
					scene = new THREE.Scene();
					scene.fog = new THREE.Fog( 0xffffff, 1, areaLength);

					//camera
					camera = new THREE.PerspectiveCamera( 75, stageWidth/stageHeight, 1, 1200);
					scene.add(camera);

					//target
					cTarget = new THREE.Object3D();
					target = new THREE.Object3D();

					scene.add(cTarget);
					scene.add(target);


					//renderer
					renderer = new THREE.WebGLRenderer( { antialias:false } );
					renderer.setSize( stageWidth, stageHeight);
					renderer.setClearColorHex(0xffffff, 1);
					renderer.autoClear = false;
					renderer.sortObjects = false	;
					container.appendChild( renderer.domElement );



					//Material
					var texture = THREE.ImageUtils.loadTexture( "/9/textures/100px_circle.png");
					particleMaterial = new THREE.ParticleBasicMaterial({
						color:0xffffff,
						map:texture,
						size:particleR,
						depthTest:false,
						transparent:true
					});


					//create particles
					particleGeometry = new THREE.Geometry();

					for( var i=0; i<particleNum; i++){
						//create vectors;
						vVectors[i] = new THREE.Vector3( 0, 0, 0);
						particlePositions[i] = new THREE.Vector3(areaLength*(Math.random()*2-1), -200, areaLength*(Math.random()*2-1));
						particleGeometry.vertices.push( new THREE.Vertex(particlePositions[i]));

					}

					particles = new THREE.ParticleSystem( particleGeometry, particleMaterial );
					scene.add( particles );



					//event
					document.addEventListener('mousemove', mouseMove);
					document.addEventListener('click', mouseClick);
					window.addEventListener('resize', resize, false);

					animate();



				}


				function mouseClick (e) {
					if(speedMultiply<10)	speedMultiply *= 1.5;
				}

				function resize(){
					stageWidth = window.innerWidth;
					stageHeight = window.innerHeight;
					camera.aspect =  stageWidth/stageHeight;
					renderer.setSize(stageWidth, stageHeight)
				//	camera.updateProjectionMatrix();
				}

				function mouseMove(ev){
					omx = mx;
					omy = my;
					mx = ev.clientX - window.innerWidth/2;
					my = ev.clientY - window.innerHeight/2;
					mrx = 0.008*(mx)*pi/180;
					mry = 0.008*(my)*pi/180;
				}

				function animate(){
					requestAnimationFrame(animate);

					update();

					renderer.clear();
					
					renderer.render(scene, camera)


				}


				var cnt = 0;
				var t1=0, t2=0;

		//////////////////////////////	//////////////////////////////	//////////////////////////////	


				function update(){

				}

				///////////////////////////////////////////

		init();
	</script>
</body>
</html>